<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Deployment | Revel - A Web Application Framework for Go!</title>
<link rel="icon" href="/pages-revel/img/favicon.ico" type="image/x-icon" /> 
<link rel="shortcut icon" href="/pages-revel/img/favicon.png" type="image/png" />

<link href="/pages-revel/js/bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet">
<link href="/pages-revel/js/bootstrap-3.3.7-dist/css/bootstrap-theme.min.css" rel="stylesheet">
<link href="/pages-revel/css/jekyll-github.css" rel="stylesheet">

<script src="/pages-revel/js/jquery-2.1.3.min.js"></script>
<script src="/pages-revel/js/bootstrap-3.3.7-dist/js/bootstrap.min.js" type="text/javascript"></script>


<link href="/pages-revel/css/revel.17.css" rel="stylesheet">

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35042202-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


</head>

<body>
    
    

    
<nav class="navbar navbar-inverse ">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <div id="main-logo"><a ddclass="navbar-brand" href="/pages-revel/">Revel</a>
            </div>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                                
                <li >
                    <a href="/pages-revel/tutorial/index.html"><span class="glyphicon glyphicon-education" aria-hidden="true"></span> Tutorial</a></li>
                
                <li class="active">
                    <a href="/pages-revel/manual/index.html"><span class="glyphicon glyphicon-book" aria-hidden="true"></span> Manual</a></li>
                    
                <li >
                    <a href="/pages-revel/modules/index.html"><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span> Modules</a></li>
                    
                    
                <li >
                    <a href="/pages-revel/examples/index.html"><span class="glyphicon glyphicon-sound-stereo" aria-hidden="true"></span> Examples</a></li>
                
                <li >
                    <a href="/pages-revel/quickref/index.html"><span class="glyphicon glyphicon-screenshot" aria-hidden="true"></span> Quick Ref</a></li>
                    
                    
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Project <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="https://github.com/revel/" target="github"><span class="glyphicon glyphicon-object-align-horizontal" aria-hidden="true"></span> Revel project @ github</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">Revel</li>
                            <li><a href="https://godoc.org/github.com/revel/revel" target="godoc"><span class="glyphicon glyphicon-hand-right" aria-hidden="true"></span> godoc</a></li>
                            <li><a href="https://github.com/revel/revel" target="github"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Source code</a></li>
                            <li><a href="https://github.com/revel/revel/issues" starget="github"><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span> Issues</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">Revel command</li>
                            <li><a href="https://github.com/revel/cmd" target="github"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Source code</a></li>
                            <li><a href="https://github.com/revel/cmd/issues" target="github"><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span> Issues</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">Modules</li>
                        <li><a href="https://github.com/revel/modules" target="github"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Source code</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">Example Apps</li>
                        <li><a href="https://github.com/revel/examples" target="github"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Source code</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">revel.github.io</li>
                        <li><a href="https://github.com/revel/revel.github.io" target="github"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Source code</a></li>
                        <li><a href="https://github.com/revel/revel.github.io/issues" starget="github"><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span> Issues</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Support <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="https://gitter.im/revel/community" target="_blank">Chat on gitter.im</a></li>
                        <li><a href="http://stackoverflow.com/questions/tagged/revel" target="_blank">Revel at StackOverflow</a></li>
                    </ul>
                <li>
                 
            </ul>
        </div>
    </div>
</nav>


    <div class="container revel-manual">
        <div class="row">
            <div class="col-md-3">
                <div class="leftnav">
    <ul class="nav">
        
            <li class="nav-header">Overview</li>
            
                
                
                    <li><a href="index.html">Introduction</a></li>
                
            
                
                
                    <li><a href="concepts.html">Concepts</a></li>
                
            
                
                
                    <li><a href="organization.html">Code Organization</a></li>
                
            
        
            <li class="nav-header">Controllers</li>
            
                
                
                    <li><a href="controllers.html">Controllers Overview</a></li>
                
            
                
                
                    <li><a href="routing.html">URL Routing</a></li>
                
            
                
                
                    <li><a href="/pages-revel/modules/static.html">Static Content</a></li>
                
            
                
                
                    <li><a href="parameters.html">Request Parameters & JSON</a></li>
                
            
                
                
                    <li><a href="validation.html">Validation</a></li>
                
            
                
                
                    <li><a href="sessionflash.html">Session & Flash</a></li>
                
            
                
                
                    <li><a href="results.html">Results & Response</a></li>
                
            
                
                
                    <li><a href="templates.html">Templates</a></li>
                
            
                
                
                    <li><a href="template-engine.html">Template Engine</a></li>
                
            
                
                
                    <li><a href="templates-go.html">Go Template Engine</a></li>
                
            
                
                
                    <li><a href="server-engine.html">Server Engine</a></li>
                
            
                
                
                    <li><a href="interceptors.html">Interceptors</a></li>
                
            
                
                
                    <li><a href="filters.html">Filters</a></li>
                
            
                
                
                    <li><a href="websockets.html">Websockets</a></li>
                
            
                
                
                    <li><a href="i18n-messages.html">Internationalization</a></li>
                
            
                
                
                    <li><a href="cache.html">Cache</a></li>
                
            
                
                
                    <li><a href="database.html">Database</a></li>
                
            
                
                
                    <li><a href="debug.html">Debugging</a></li>
                
            
                
                
                    <li><a href="/pages-revel/modules/testing.html">Testing</a></li>
                
            
        
            <li class="nav-header">Operational</li>
            
                
                
                    <li><a href="versions.html">Versions</a></li>
                
            
                
                
                    <li><a href="logging.html">Logging</a></li>
                
            
                
                
                    <li class="active"><a href="deployment.html">Deployment</a></li>
                
            
        
            <li class="nav-header">Reference</li>
            
                
                
                    <li><a href="appconf.html">app.conf</a></li>
                
            
                
                
                    <li><a href="tool.html">revel cmd</a></li>
                
            
                
                
                    <li><a href="faq.html">FAQ</a></li>
                
            
        
    </ul>
</div>

            </div>

            <div class="col-md-9">
                <div class="page-header">
                    <a href="https://github.com/revel/revel.github.io/edit/master/manual/deployment.md" class="improve-page btn dbtn-info" target="_blank"><span class="glyphicon glyphicon-edit" aria-hidden="true"></span> Improve Page</a>
                    <h1>Deployment</h1>
                </div>
                <div class="main">
                    <div class="alert alert-success">
Revel does NOT have connection/resource management and all production deployments 
should have a HTTP proxy that is properly configured in front of all Revel HTTP requests.
</div>

<h2 id="overview">Overview</h2>

<p>There are a couple common deployment routes:</p>

<ul>
  <li><a href="#build-local">Build the app locally</a> and copy it to the server.</li>
  <li><a href="#build-server">On the server</a>, pull the updated code, build it, and run it.</li>
  <li><a href="#heroku">Use Heroku</a> to manage deployment.</li>
</ul>

<p>The command line sessions demonstrate interactive deployment; typically in production
 a tool would be used for daemonizing the web server.  Some common tools are:</p>

<ul>
  <li><a href="http://upstart.ubuntu.com">Ubuntu Upstart</a></li>
  <li><a href="http://www.freedesktop.org/wiki/Software/systemd">systemd</a></li>
  <li><a href="http://supervisord.org/">Supervisor</a></li>
</ul>

<p><a name="build-local"></a></p>

<h2 id="build-locally">Build locally</h2>

<p>Revel apps may be deployed to machines that do not have a functioning Go
installation.  The <a href="tool.html">command line tool</a> provides the <code class="highlighter-rouge">package</code> command
which compiles and zips the app, along with a script to run it.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Run and test my app.
$ revel run import/path/to/app
.. test app ..

# Package it up.
$ revel package import/path/to/app
Your archive is ready: app.tar.gz

# Copy to the target machine.
$ scp app.tar.gz target:/srv/

# Run it on the target machine.
$ ssh target
$ cd /srv/
$ tar xzvf app.tar.gz
$ bash run.sh
</code></pre></div></div>

<p>This only works if you develop and deploy to the same architecture, or if you configure your go
installation to build to the desired architecture by default. See below for cross-compilation support.</p>

<h3 id="incremental-deployment">Incremental deployment</h3>

<p>Since a statically-linked binary with a full set of assets can grow to be quite
large, incremental deployment is supported.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Build the app into a temp directory
$ revel build import/path/to/app /tmp/app

# Rsync that directory into the home directory on the server
$ rsync -vaz --rsh="ssh" /tmp/app server

# Connect to server and restart the app.
...
</code></pre></div></div>

<p>Rsync has full support for copying over ssh.  For example, here’s a more complicated connection.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># A more complicated example using custom certificate, login name, and target directory
$ rsync -vaz --rsh="ssh -i .ssh/go.pem" /tmp/myapp2 ubuntu@ec2-50-16-80-4.compute-1.amazonaws.com:~/rsync
</code></pre></div></div>

<p><a name="build-server"></a></p>

<h2 id="build-on-the-server">Build on the server</h2>

<p>This method relies on your version control system to distribute updates.  It
requires your server to have a Go installation.  In return, it allows you to
avoid potentially having to cross-compile.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ssh server
... install go ...
... configure your app repository ...

# Move to the app directory (in your GOPATH), pull updates, and run the server.
$ cd gocode/src/import/path/to/app
$ git pull
$ revel run import/path/to/app prod
</code></pre></div></div>

<p><a name="heroku"></a></p>

<h2 id="heroku">Heroku</h2>

<p>Revel maintains a <em>Heroku Buildpack</em>, allowing one-command deploys.</p>

<ul>
  <li>Visit <a href="https://github.com/revel/heroku-buildpack-go-revel">heroku-buildpack-go-revel</a> on github</li>
  <li>See the <a href="https://github.com/revel/heroku-buildpack-go-revel/blob/master/README.md">README</a> for usage instructions.</li>
</ul>

<h2 id="boxfuse-and-amazon-web-services">Boxfuse and Amazon Web Services</h2>

<p><a href="https://boxfuse.com">Boxfuse</a> comes with first-class support for Revel apps with one-command deploys to AWS.</p>

<ul>
  <li>Visit the <a href="https://boxfuse.com/getstarted/revel">Get Started with Boxfuse and Revel</a> guide to be up and running on AWS in minutes</li>
  <li>See the <a href="https://boxfuse.com/docs/payloads/revel">Boxfuse Revel reference documentation</a> for details.</li>
</ul>

<h2 id="cross-compilation">Cross-compilation</h2>

<p>In order to create a cross-compile environment, you need to build go from source.
See
<a href="http://golang.org/doc/install/source">Installing Go from source</a>
for more information.
You must properly set your $PATH and $GOPATH variables, otherwise if there is an existing
binary Go package, you will get into serious errors.</p>

<p>When you have a go compiler successfully setup, build the cross-compiler by
specifying the target environment with GOOS and GOARCH environment variables. See
<a href="http://golang.org/doc/install/source#environment">Optional environment variables</a>
for more information.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd /path/to/goroot/src
$ GOOS=linux GOARCH=amd64 ./make.bash --no-clean
$ GOOS=windows GOARCH=386 ./make.bash --no-clean
</code></pre></div></div>

<p>Install revel on the new environment and you are set to go with the packaging.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ GOOS=linux GOARCH=amd64 revel package import/path/to/app
</code></pre></div></div>

<p>Copy the resulting tarball to your target platform.</p>


                    


                    


                </div>
            </div>
        </div>
        
        <footer>
            <p>&copy; Revel Team 2017 - Revel is released under the <a href="https://github.com/revel/revel/blob/master/LICENSE">MIT License</a></p>
        </footer>
    </div>
</body>
</html>

