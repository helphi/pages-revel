<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Logging | Revel - A Web Application Framework for Go!</title>
<link rel="icon" href="/img/favicon.ico" type="image/x-icon" /> 
<link rel="shortcut icon" href="/img/favicon.png" type="image/png" />

<link href="/pages-revel/js/bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet">
<link href="/pages-revel/js/bootstrap-3.3.7-dist/css/bootstrap-theme.min.css" rel="stylesheet">
<link href="/pages-revel/css/jekyll-github.css" rel="stylesheet">

<script src="/pages-revel/js/jquery-2.1.3.min.js"></script>
<script src="/pages-revel/js/bootstrap-3.3.7-dist/js/bootstrap.min.js" type="text/javascript"></script>


<link href="/pages-revel/css/revel.17.css" rel="stylesheet">

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35042202-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


</head>

<body>
    
    

    
<nav class="navbar navbar-inverse ">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <div id="main-logo"><a ddclass="navbar-brand" href="/">Revel</a>
            </div>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                                
                <li >
                    <a href="/pages-revel/tutorial/index.html"><span class="glyphicon glyphicon-education" aria-hidden="true"></span> Tutorial</a></li>
                
                <li class="active">
                    <a href="/pages-revel/manual/index.html"><span class="glyphicon glyphicon-book" aria-hidden="true"></span> Manual</a></li>
                    
                <li >
                    <a href="/pages-revel/modules/index.html"><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span> Modules</a></li>
                    
                    
                <li >
                    <a href="/pages-revel/examples/index.html"><span class="glyphicon glyphicon-sound-stereo" aria-hidden="true"></span> Examples</a></li>
                
                <li >
                    <a href="/pages-revel/quickref/index.html"><span class="glyphicon glyphicon-screenshot" aria-hidden="true"></span> Quick Ref</a></li>
                    
                    
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Project <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="https://github.com/revel/" target="github"><span class="glyphicon glyphicon-object-align-horizontal" aria-hidden="true"></span> Revel project @ github</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">Revel</li>
                            <li><a href="https://godoc.org/github.com/revel/revel" target="godoc"><span class="glyphicon glyphicon-hand-right" aria-hidden="true"></span> godoc</a></li>
                            <li><a href="https://github.com/revel/revel" target="github"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Source code</a></li>
                            <li><a href="https://github.com/revel/revel/issues" starget="github"><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span> Issues</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">Revel command</li>
                            <li><a href="https://github.com/revel/cmd" target="github"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Source code</a></li>
                            <li><a href="https://github.com/revel/cmd/issues" target="github"><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span> Issues</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">Modules</li>
                        <li><a href="https://github.com/revel/modules" target="github"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Source code</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">Example Apps</li>
                        <li><a href="https://github.com/revel/examples" target="github"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Source code</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">revel.github.io</li>
                        <li><a href="https://github.com/revel/revel.github.io" target="github"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Source code</a></li>
                        <li><a href="https://github.com/revel/revel.github.io/issues" starget="github"><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span> Issues</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Support <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="https://gitter.im/revel/community" target="_blank">Chat on gitter.im</a></li>
                        <li><a href="http://stackoverflow.com/questions/tagged/revel" target="_blank">Revel at StackOverflow</a></li>
                    </ul>
                <li>
                 
            </ul>
        </div>
    </div>
</nav>


    <div class="container revel-manual">
        <div class="row">
            <div class="col-md-3">
                <div class="leftnav">
    <ul class="nav">
        
            <li class="nav-header">Overview</li>
            
                
                
                    <li><a href="index.html">Introduction</a></li>
                
            
                
                
                    <li><a href="concepts.html">Concepts</a></li>
                
            
                
                
                    <li><a href="organization.html">Code Organization</a></li>
                
            
        
            <li class="nav-header">Controllers</li>
            
                
                
                    <li><a href="controllers.html">Controllers Overview</a></li>
                
            
                
                
                    <li><a href="routing.html">URL Routing</a></li>
                
            
                
                
                    <li><a href="/modules/static.html">Static Content</a></li>
                
            
                
                
                    <li><a href="parameters.html">Request Parameters & JSON</a></li>
                
            
                
                
                    <li><a href="validation.html">Validation</a></li>
                
            
                
                
                    <li><a href="sessionflash.html">Session & Flash</a></li>
                
            
                
                
                    <li><a href="results.html">Results & Response</a></li>
                
            
                
                
                    <li><a href="templates.html">Templates</a></li>
                
            
                
                
                    <li><a href="template-engine.html">Template Engine</a></li>
                
            
                
                
                    <li><a href="templates-go.html">Go Template Engine</a></li>
                
            
                
                
                    <li><a href="server-engine.html">Server Engine</a></li>
                
            
                
                
                    <li><a href="interceptors.html">Interceptors</a></li>
                
            
                
                
                    <li><a href="filters.html">Filters</a></li>
                
            
                
                
                    <li><a href="websockets.html">Websockets</a></li>
                
            
                
                
                    <li><a href="i18n-messages.html">Internationalization</a></li>
                
            
                
                
                    <li><a href="cache.html">Cache</a></li>
                
            
                
                
                    <li><a href="database.html">Database</a></li>
                
            
                
                
                    <li><a href="debug.html">Debugging</a></li>
                
            
                
                
                    <li><a href="/modules/testing.html">Testing</a></li>
                
            
        
            <li class="nav-header">Operational</li>
            
                
                
                    <li><a href="versions.html">Versions</a></li>
                
            
                
                
                    <li class="active"><a href="logging.html">Logging</a></li>
                
            
                
                
                    <li><a href="deployment.html">Deployment</a></li>
                
            
        
            <li class="nav-header">Reference</li>
            
                
                
                    <li><a href="appconf.html">app.conf</a></li>
                
            
                
                
                    <li><a href="tool.html">revel cmd</a></li>
                
            
                
                
                    <li><a href="faq.html">FAQ</a></li>
                
            
        
    </ul>
</div>

            </div>

            <div class="col-md-9">
                <div class="page-header">
                    <a href="https://github.com/revel/revel.github.io/edit/master/manual/logging.md" class="improve-page btn dbtn-info" target="_blank"><span class="glyphicon glyphicon-edit" aria-hidden="true"></span> Improve Page</a>
                    <h1>Logging</h1>
                </div>
                <div class="main">
                    <p>When logging in Revel you should use the <a href="https://godoc.org/github.com/revel/revel#Controller">controller.Log</a>
If you have services running in the background you should use the <a href="https://godoc.org/github.com/revel/revel#AppLog">revel.AppLog</a></p>

<p><strong>Internally Revel uses <a href="https://github.com/inconshreveable/log15">log15</a> to do the core work, more
information about the log handlers can be found there.</strong></p>

<p>Below is the logger interface.</p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="x">	</span><span class="n">MultiLogger</span><span class="x"> </span><span class="k">interface</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="c">// New returns a new Logger that has this logger's context plus the given context</span><span class="x">
		</span><span class="n">New</span><span class="p">(</span><span class="n">ctx</span><span class="x"> </span><span class="o">...</span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="n">MultiLogger</span><span class="x">

		</span><span class="c">// SetHandler updates the logger to write records to the specified handler.</span><span class="x">
		</span><span class="n">SetHandler</span><span class="p">(</span><span class="n">h</span><span class="x"> </span><span class="n">LogHandler</span><span class="p">)</span><span class="x">

		</span><span class="n">Debug</span><span class="p">(</span><span class="n">msg</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">ctx</span><span class="x"> </span><span class="o">...</span><span class="k">interface</span><span class="p">{})</span><span class="x">
		</span><span class="n">Debugf</span><span class="p">(</span><span class="n">msg</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">params</span><span class="x"> </span><span class="o">...</span><span class="k">interface</span><span class="p">{})</span><span class="x">
		</span><span class="n">Info</span><span class="p">(</span><span class="n">msg</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">ctx</span><span class="x"> </span><span class="o">...</span><span class="k">interface</span><span class="p">{})</span><span class="x">
		</span><span class="n">Infof</span><span class="p">(</span><span class="n">msg</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">params</span><span class="x"> </span><span class="o">...</span><span class="k">interface</span><span class="p">{})</span><span class="x">
		</span><span class="n">Warn</span><span class="p">(</span><span class="n">msg</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">ctx</span><span class="x"> </span><span class="o">...</span><span class="k">interface</span><span class="p">{})</span><span class="x">
		</span><span class="n">Warnf</span><span class="p">(</span><span class="n">msg</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">params</span><span class="x"> </span><span class="o">...</span><span class="k">interface</span><span class="p">{})</span><span class="x">
		</span><span class="n">Error</span><span class="p">(</span><span class="n">msg</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">ctx</span><span class="x"> </span><span class="o">...</span><span class="k">interface</span><span class="p">{})</span><span class="x">
		</span><span class="n">Errorf</span><span class="p">(</span><span class="n">msg</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">params</span><span class="x"> </span><span class="o">...</span><span class="k">interface</span><span class="p">{})</span><span class="x">
		</span><span class="n">Crit</span><span class="p">(</span><span class="n">msg</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">ctx</span><span class="x"> </span><span class="o">...</span><span class="k">interface</span><span class="p">{})</span><span class="x">
		</span><span class="n">Critf</span><span class="p">(</span><span class="n">msg</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">params</span><span class="x"> </span><span class="o">...</span><span class="k">interface</span><span class="p">{})</span><span class="x">

		</span><span class="c">//// Logs a message as an Crit and exits</span><span class="x">
		</span><span class="n">Fatal</span><span class="p">(</span><span class="n">msg</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">ctx</span><span class="x"> </span><span class="o">...</span><span class="k">interface</span><span class="p">{})</span><span class="x">
		</span><span class="n">Fatalf</span><span class="p">(</span><span class="n">msg</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">params</span><span class="x"> </span><span class="o">...</span><span class="k">interface</span><span class="p">{})</span><span class="x">
		</span><span class="c">//// Logs a message as an Crit and panics</span><span class="x">
		</span><span class="n">Panic</span><span class="p">(</span><span class="n">msg</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">ctx</span><span class="x"> </span><span class="o">...</span><span class="k">interface</span><span class="p">{})</span><span class="x">
		</span><span class="n">Panicf</span><span class="p">(</span><span class="n">msg</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">params</span><span class="x"> </span><span class="o">...</span><span class="k">interface</span><span class="p">{})</span><span class="x">
	</span><span class="p">}</span><span class="x">

</span></code></pre></div></div>

<h3 id="usage">Usage</h3>

<h4 id="log-contexts">Log Contexts</h4>
<p>Logging using these <code class="highlighter-rouge">Debug,Info,Warn,Error,Crit</code> methods will expect the 
message values in key value pairs. For example <code class="highlighter-rouge">revel.AppLog.Debug("Hi there")</code> 
is fine <code class="highlighter-rouge">revel.AppLog.Debug("Hi there", 25)</code> will panic (only passed one argument for
 the context). <code class="highlighter-rouge">revel.AppLog.Debug("Hi there","age",25,"sex","yes","state",254)</code> is fine. 
 This will produce a log message that includes the context age,sex,state like .</p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">INFO</span><span class="x"> </span><span class="m">2017</span><span class="o">/</span><span class="m">08</span><span class="o">/</span><span class="m">02</span><span class="x"> </span><span class="m">22</span><span class="o">:</span><span class="m">31</span><span class="o">:</span><span class="m">41</span><span class="x"> </span><span class="n">test</span><span class="o">.</span><span class="k">go</span><span class="o">:</span><span class="m">168</span><span class="o">:</span><span class="x"> </span><span class="n">Hi</span><span class="x"> </span><span class="n">There</span><span class="x">                           </span><span class="n">age</span><span class="o">=</span><span class="m">25</span><span class="x"> </span><span class="n">sex</span><span class="o">=</span><span class="n">yes</span><span class="x"> </span><span class="n">state</span><span class="o">=</span><span class="m">254</span><span class="x">
</span></code></pre></div></div>
<p>or in json like</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="s2">"caller"</span><span class="p">:</span><span class="s2">"test.go:168"</span><span class="p">,</span><span class="s2">"lvl"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="s2">"t"</span><span class="p">:</span><span class="s2">"2017-08-02T22:34:08.303112145-07:00"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"age"</span><span class="p">:</span><span class="mi">25</span><span class="p">,</span><span class="s2">"sex"</span><span class="p">:</span><span class="s2">"yes"</span><span class="p">,</span><span class="s2">"state"</span><span class="p">:</span><span class="mi">254</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>If you want you can fork a new log from the control logger to continue using in your code or to pass to the model - consider this</p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">c</span><span class="x"> </span><span class="o">*</span><span class="n">FooController</span><span class="p">)</span><span class="x"> </span><span class="n">Edit</span><span class="p">(</span><span class="n">id</span><span class="x"> </span><span class="kt">int</span><span class="p">)</span><span class="x"> </span><span class="n">revel</span><span class="o">.</span><span class="n">Result</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">log</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">c</span><span class="o">.</span><span class="n">Log</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="s">"id"</span><span class="p">,</span><span class="n">id</span><span class="p">)</span><span class="x">
  </span><span class="n">log</span><span class="o">.</span><span class="n">Debug</span><span class="p">(</span><span class="s">"Reading the output"</span><span class="p">)</span><span class="x">
  </span><span class="n">output</span><span class="p">,</span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">model</span><span class="o">.</span><span class="n">Load</span><span class="p">(</span><span class="n">log</span><span class="p">,</span><span class="x"> </span><span class="n">id</span><span class="p">)</span><span class="x">
  </span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="o">!=</span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">log</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s">"Failed to load :%s"</span><span class="p">,</span><span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span><span class="x">
  </span><span class="p">}</span><span class="x">
  </span><span class="o">...</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div></div>
<p>Could produce the following output (if an error occurred)</p>
<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">INFO</span> <span class="err">22:31:41</span> <span class="err">app</span> <span class="err">test.go:168:</span> <span class="err">Reading</span> <span class="err">the</span> <span class="err">output</span>                                <span class="py">id</span><span class="p">=</span><span class="s">25</span>
<span class="err">ERROR</span> <span class="err">22:31:41</span> <span class="err">app</span> <span class="err">test.go:168:</span> <span class="err">Failed</span> <span class="err">to</span> <span class="err">load:</span> <span class="err">Not</span> <span class="err">Found</span>                        <span class="py">id</span><span class="p">=</span><span class="s">25</span>

</code></pre></div></div>

<h4 id="log-formats">Log formats</h4>
<p>Logging using these <code class="highlighter-rouge">Debugf,Infof,Warnf,Errorf,Critf</code> methods allows you to output a formatted string for the message. like
<code class="highlighter-rouge">revel.AppLog.Debugf("Hi %s ", "Grace")</code>. Only existing contexts will be applied to them. For example look at the log.Errorf below</p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">c</span><span class="x"> </span><span class="o">*</span><span class="n">FooController</span><span class="p">)</span><span class="x"> </span><span class="n">Edit</span><span class="p">(</span><span class="n">id</span><span class="x"> </span><span class="kt">int</span><span class="p">)</span><span class="x"> </span><span class="n">revel</span><span class="o">.</span><span class="n">Result</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">log</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">c</span><span class="o">.</span><span class="n">Log</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="s">"id"</span><span class="p">,</span><span class="n">id</span><span class="p">)</span><span class="x">
  </span><span class="n">log</span><span class="o">.</span><span class="n">Debug</span><span class="p">(</span><span class="s">"Reading the output"</span><span class="p">)</span><span class="x">
  </span><span class="n">output</span><span class="p">,</span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">model</span><span class="o">.</span><span class="n">Load</span><span class="p">(</span><span class="n">log</span><span class="p">,</span><span class="x"> </span><span class="n">id</span><span class="p">)</span><span class="x">
  </span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="o">!=</span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">log</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s">"Failed to load :%s"</span><span class="p">,</span><span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span><span class="x">
  </span><span class="p">}</span><span class="x">
  </span><span class="o">...</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div></div>
<p>Could produce the following output (if an error occurred)</p>
<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">INFO</span> <span class="err">22:31:41</span> <span class="err">app</span> <span class="err">test.go:168:</span> <span class="err">Reading</span> <span class="err">the</span> <span class="err">output</span>                                <span class="py">id</span><span class="p">=</span><span class="s">25</span>
<span class="err">ERROR</span> <span class="err">22:31:41</span> <span class="err">app</span> <span class="err">test.go:168:</span> <span class="err">Failed</span> <span class="err">to</span> <span class="err">load:</span> <span class="err">Not</span> <span class="err">Found</span>                        <span class="py">id</span><span class="p">=</span><span class="s">25</span>

</code></pre></div></div>

<h3 id="appconf">App.conf</h3>

<p>Configuration examples
1) All log messages that match the filter <code class="highlighter-rouge">module=app</code> to stdout, 
all messages that are error messages send to stderr. Order is significant here, 
the second statement <code class="highlighter-rouge">log.error.output = stderr</code> replaces the error handler 
specified by the <code class="highlighter-rouge">log.all</code> of the first line.</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">log.all.filter.module.app</span> <span class="p">=</span> <span class="s">stdout # Log all loggers for the application to the stdout</span>
<span class="py">log.error.output</span> <span class="p">=</span> <span class="s">stderr          # Log all loggers for Revel errors to the stderr</span>
</code></pre></div></div>

<p>2) Existing configurations will work as well, you can even expand on them</p>
<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">log.debug.output</span> <span class="p">=</span> <span class="s">stdout        # Outputs to the stdout</span>
<span class="py">log.info.output</span>  <span class="p">=</span> <span class="s">myloghandler  # Outputs to the function in LogFunctionMap</span>
<span class="py">log.warn.output</span>  <span class="p">=</span> <span class="s">stderr        # Outputs to the stderr</span>
<span class="py">log.request.output</span> <span class="p">=</span> <span class="s">myloghandler</span>
<span class="py">log.error.output</span> <span class="p">=</span> <span class="s">somefile/log.json          # Outputs to the file specified file using JSON format</span>
<span class="py">log.error.filter.module.revel</span> <span class="p">=</span> <span class="s">stdout               # Filters based on context module.revel, outputs to stdout</span>
<span class="py">log.error.filter.module.revel.context.route</span> <span class="p">=</span> <span class="s">stdout # Filters based on context module.revel, context route outputs to stdout </span>
<span class="py">log.critical.output</span>  <span class="p">=</span> <span class="s">stderr        # Outputs to the stderr</span>
</code></pre></div></div>

<p>To summarize the log output can be a named function contained in <code class="highlighter-rouge">logger.LogFunctionMap</code>. If that
 function does not exist then it is assumed to be a file name, the file name extension will choose
 the output format. The <code class="highlighter-rouge">stderr</code> and <code class="highlighter-rouge">stdout</code> are two predefined functions which may be overriden if desired</p>

<h4 id="filtered-logging">Filtered logging</h4>
<p>A log <strong>filter</strong> can specify a series of key, values that will only be logged to if <em>ALL</em> the 
keys and values match a context in the log. For example the following will log at level error
to the stdout if the log message contains the context <code class="highlighter-rouge">module=revel</code></p>
<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">log.error.filter.module.revel</span> <span class="p">=</span> <span class="s">stdout </span>
</code></pre></div></div>
<p>Filters are <em>additive</em>, they do not replace existing error handlers - for example in the 
following error messages that are logged with the context of <code class="highlighter-rouge">module=revel</code> will be sent to the
<code class="highlighter-rouge">stdout</code> and to the json file</p>
<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">log.all.output</span> <span class="p">=</span> <span class="s">stdout </span>
<span class="py">log.error.filter.module.revel</span> <span class="p">=</span> <span class="s">/var/log/revel/revel.json </span>
</code></pre></div></div>
<p>Filters may be empty so that you can make use the additive feature, the following sends all errors to both 
<code class="highlighter-rouge">stdout</code> and <code class="highlighter-rouge">all-errors.json </code></p>
<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">log.all.output</span> <span class="p">=</span> <span class="s">stdout </span>
<span class="py">log.error.filter</span> <span class="p">=</span> <span class="s">/var/log/revel/all-errors.json </span>
</code></pre></div></div>

<p>Inverse filters can be applied by using <strong>nfilter</strong> for example, consider the following</p>
<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">log.all.filter.module.app</span> <span class="p">=</span> <span class="s">stdout    # Log all loggers for the application to the stdout</span>
<span class="py">log.error.output</span> <span class="p">=</span> <span class="s">stderr             # Log all errors to stderr</span>
</code></pre></div></div>
<p>In this case any application error would end up logging to both stdout and stderr - which in some cases 
(like output to a file) would be 
useful but if you do not want to send duplicate messages to the console you can do the following</p>
<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">log.all.filter.module.app</span> <span class="p">=</span> <span class="s">stdout    # Log all loggers for the application to the stdout</span>
<span class="py">log.error.nfilter.module.app</span> <span class="p">=</span> <span class="s">stderr # Everything else that logs an error to stderr</span>
</code></pre></div></div>
<p>The <code class="highlighter-rouge">log.error.nfilter.module.app</code> is the inversion of the first filter, with the type of error.</p>

<h4 id="file-logging">File logging</h4>
<p>For file logging revel uses <a href="https://github.com/natefinch/lumberjack">lumberjack.Logger</a> 
to stream the output to file. The following configuration options can be set</p>
<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">log.compressBackups</span> <span class="p">=</span> <span class="s">true # Compress the backups after rotation default true</span>
<span class="py">log.maxsize</span> <span class="p">=</span> <span class="s">1024         # The max file size before rotation in MB degault 10G</span>
<span class="py">log.maxagelog.maxage</span><span class="p">=</span> <span class="s">14   # The max age of the file before rotation occurs default 14 days</span>
<span class="py">log.maxbackups</span> <span class="p">=</span> <span class="s">14        # The max number of old log files to keep default 14</span>
</code></pre></div></div>
<p>These are global options, you can however apply unique options by 
<a href="#customizing_log_handling">Customizing Log Handling</a></p>

<h5 id="more-configuration-options">More configuration options</h5>
<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">log.colorize</span> <span class="p">=</span> <span class="s">true   # Turns off colorization for console output</span>
<span class="py">log.smallDate</span> <span class="p">=</span> <span class="s">true  # Outputs just the time for the terminal output</span>
</code></pre></div></div>

<h5 id="customizing-log-handling">Customizing Log Handling</h5>

<p>The following code adds a new output called stdoutjson</p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="x">	</span><span class="n">logger</span><span class="o">.</span><span class="n">LogFunctionMap</span><span class="p">[</span><span class="s">"stdoutjson"</span><span class="p">]</span><span class="o">=</span><span class="x">
		</span><span class="k">func</span><span class="p">(</span><span class="n">c</span><span class="x"> </span><span class="o">*</span><span class="n">logger</span><span class="o">.</span><span class="n">CompositeMultiHandler</span><span class="p">,</span><span class="x"> </span><span class="n">options</span><span class="x"> </span><span class="o">*</span><span class="n">logger</span><span class="o">.</span><span class="n">LogOptions</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="c">// Set the json formatter to os.Stdout, replace any existing handlers for the level specified</span><span class="x">
			</span><span class="n">c</span><span class="o">.</span><span class="n">SetJson</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">Stdout</span><span class="p">,</span><span class="x"> </span><span class="n">options</span><span class="p">)</span><span class="x">
		</span><span class="p">}</span><span class="x">
	</span><span class="n">logger</span><span class="o">.</span><span class="n">LogFunctionMap</span><span class="p">[</span><span class="s">"longtermstorage"</span><span class="p">]</span><span class="o">=</span><span class="x">
		</span><span class="k">func</span><span class="p">(</span><span class="n">c</span><span class="x"> </span><span class="o">*</span><span class="n">logger</span><span class="o">.</span><span class="n">CompositeMultiHandler</span><span class="p">,</span><span class="x"> </span><span class="n">options</span><span class="x"> </span><span class="o">*</span><span class="n">logger</span><span class="o">.</span><span class="n">LogOptions</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="n">options</span><span class="o">.</span><span class="n">SetExtendedOptions</span><span class="p">(</span><span class="s">"maxAgeDays"</span><span class="p">,</span><span class="m">30</span><span class="p">,</span><span class="s">"maxSizeMB"</span><span class="p">,</span><span class="m">1024</span><span class="o">*</span><span class="m">10</span><span class="p">,</span><span class="s">"maxBackups"</span><span class="p">,</span><span class="m">50</span><span class="p">)</span><span class="x">
			</span><span class="n">c</span><span class="o">.</span><span class="n">SetJsonFile</span><span class="p">(</span><span class="s">"/var/log/revel/longterm.json"</span><span class="p">,</span><span class="x"> </span><span class="n">options</span><span class="p">)</span><span class="x">
		</span><span class="p">}</span><span class="x">
</span></code></pre></div></div>
<p>This setting in <code class="highlighter-rouge">app.conf</code> would activate the above logger for all log messages of level Warn
and error messages from the <code class="highlighter-rouge">module=revel</code></p>
<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">log.warn.output</span> <span class="p">=</span> <span class="s">stdoutjson</span>
<span class="py">log.error.filter.module.revel</span> <span class="p">=</span> <span class="s">longtermstorage </span>
</code></pre></div></div>

<p><em>It is important to note that your logger function may be called with a <code class="highlighter-rouge">nil</code> <code class="highlighter-rouge">options.Ctx</code> 
 (this is the <code class="highlighter-rouge">revel.Config</code>).</em></p>

<h5 id="the-special-cases">The special cases</h5>
<ul>
  <li>
    <p><code class="highlighter-rouge">log.request.output</code> assigns a handler for messages which are on the info channel and have the 
<code class="highlighter-rouge">section=requestlog</code> assigned to them. If <code class="highlighter-rouge">log.request.output</code> is not specified then messages will
be logged directly to the same handler handling the <code class="highlighter-rouge">info</code> log level.</p>
  </li>
  <li><code class="highlighter-rouge">log.trace</code> usage in initialization files is deprecated and replace by <code class="highlighter-rouge">log.debug</code></li>
  <li>If <code class="highlighter-rouge">log.critical</code> is not specified and <code class="highlighter-rouge">log.error</code> has been. Then the error handler 
 will receive the critical messages as well</li>
</ul>

<h4 id="deprecated-logs">Deprecated Logs</h4>
<p>The following loggers are deprecated, the will continue to function but will output something like this 
<code class="highlighter-rouge">INFO  22:16:10    app harness.go:190: * LOG DEPRECATED * Listening on :9000    module=app section=deprecated </code></p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">revel</span><span class="o">.</span><span class="n">TRACE</span><span class="x">
</span><span class="n">revel</span><span class="o">.</span><span class="n">INFO</span><span class="x">
</span><span class="n">revel</span><span class="o">.</span><span class="n">WARN</span><span class="x">
</span><span class="n">revel</span><span class="o">.</span><span class="n">ERROR</span><span class="x">
</span></code></pre></div></div>

<h4 id="internal-structure">Internal structure</h4>

<p>Revel provides a single root logger called <a href="https://godoc.org/github.com/revel/revel#RootLog">revel.RootLog</a>. 
The logger is forked into the following loggers</p>
<ul>
  <li><a href="https://godoc.org/github.com/revel/revel#AppLog">revel.RevelLog</a> Contains context of <code class="highlighter-rouge">module=revel</code></li>
  <li><a href="https://godoc.org/github.com/revel/revel#AppLog">revel.AppLog</a> Contains context of <code class="highlighter-rouge">module=app</code></li>
  <li><a href="https://godoc.org/github.com/revel/revel#Module">module.Log</a> on Startup of revel, 
 it contains the context of <code class="highlighter-rouge">module=modulename</code>.</li>
</ul>

<p><a href="https://godoc.org/github.com/revel/revel#AppLog">revel.AppLog</a> is forked to create a logger for</p>
<ul>
  <li><a href="https://godoc.org/github.com/revel/revel#Controller">controller.Log</a><br />
 A new instance is created on every request, and contains context information like, 
     the source ip, request path and request method. 
     <strong>If the controller handling the response is from a module it will be forked from 
     <a href="https://godoc.org/github.com/revel/revel#Module">module.Log</a></strong></li>
</ul>

<h4 id="request-logger">Request logger</h4>
<p>Sample format: terminal format</p>
<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">log.request.output</span> <span class="p">=</span> <span class="s">stdout</span>
</code></pre></div></div>
<p>be logged directly to the same handler handling the <code class="highlighter-rouge">info</code> log level.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>INFO 2017/08/02 22:31:41 server-engine.go:168: Request Stats                            ip=::1 path=/public/img/favicon.png method=GET action=Static.Serve namespace=static\\ start=2017/08/02 22:31:41 status=200 duration_seconds=0.0007656
</code></pre></div></div>

<p>JSON Format</p>
<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">log.request.output</span> <span class="p">=</span> <span class="s">/var/log/revel/requestlog.json</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{"action":"Static.Serve","caller":"server-engine.go:168","duration_seconds":0.00058336,"ip":"::1","lvl":3,
 "method":"GET","msg":"Request Stats","namespace":"static\\","path":"/public/img/favicon.png",
 "start":"2017-08-02T22:34:08-0700","status":200,"t":"2017-08-02T22:34:08.303112145-07:00"}
</code></pre></div></div>

<hr />

<ul>
  <li>Issues tagged with <a href="https://github.com/revel/revel/labels/topic-log"><code class="highlighter-rouge">log</code></a></li>
</ul>

<h3 id="module-logs">Module Logs</h3>
<p>To fetch a logger initialized for a module you can use the <code class="highlighter-rouge">revel.RegisterModuleInit</code> like below</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">var</span><span class="x"> </span><span class="n">moduleLogger</span><span class="x"> </span><span class="n">logger</span><span class="o">.</span><span class="n">MultiLogger</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">init</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">revel</span><span class="o">.</span><span class="n">RegisterModuleInit</span><span class="p">(</span><span class="k">func</span><span class="p">(</span><span class="n">module</span><span class="x"> </span><span class="o">*</span><span class="n">revel</span><span class="o">.</span><span class="n">Module</span><span class="p">){</span><span class="x">
		</span><span class="n">moduleLogger</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">module</span><span class="o">.</span><span class="n">Log</span><span class="x">
		</span><span class="n">moduleLogger</span><span class="o">.</span><span class="n">Debug</span><span class="p">(</span><span class="s">"Assigned Logger"</span><span class="p">)</span><span class="x">
	</span><span class="p">})</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></code></pre></div></div>
<p>The <code class="highlighter-rouge">callback</code> registered in the <code class="highlighter-rouge">revel.RegisterModuleInit</code> is called before the <code class="highlighter-rouge">revel.OnAppStart</code>
functions are.</p>

                    
<div class="revel-godoc-bar">
  <h6>GoDoc Reference</h6>
  <ul>
    <li>
      
      <a href="https://godoc.org/github.com/revel/revel#AppLog" target="_revel_godoc">AppLog</a>,
      
      <a href="https://godoc.org/github.com/revel/revel#RevelLog" target="_revel_godoc">RevelLog</a>
      
    </li>
  </ul>
</div>



                    
<div class="revel-github-bar">
  <h6>GitHub Labels</h6>
  <ul>
    <li><b>Issues: </b> 
      
      <a href="https://github.com/revel/revel/labels/topic-log" target="_revel_issues">topic-log</a> 
      
      
    </li>
    <li><b>Pull Requests: </b> 
      
      <a href="https://github.com/revel/revel/pulls?q=is%3Apr+is%3Aopen+label%3Atopic-log" target="_revel_pull_requests">topic-log</a>
      
      
    </li>
  </ul>
</div>



                </div>
            </div>
        </div>
        
        <footer>
            <p>&copy; Revel Team 2017 - Revel is released under the <a href="https://github.com/revel/revel/blob/master/LICENSE">MIT License</a></p>
        </footer>
    </div>
</body>
</html>

